{{- define "JoinFields"}}
	{{- range $key, $Type := . -}}
		{{- if ne $key 0}}, {{end -}}
		{{- $Type.Field.Name -}}
	{{- end -}}
{{end -}}
{{- define "JoinParameters"}}
    {{- range $key, $Type := . -}}
		{{- if ne $key 0}}, {{end}}{{- $Type.Field.VariableName}} {{$Type.Name}}
	{{- end -}}
{{end -}}

{{- define "CopySlice" -}}
    make([]{{.Pointer}}
    {{- if ne .Package "" -}} {{.Package}}. {{- end -}}
    {{.Definition}}, len({{.From.FullVariableName ""}}))
    for key, val := range {{.From.FullVariableName ""}} {
        {{.FullVariableName ""}}[key] =
        {{- if eq .Definition .From.Definition -}}
            val
        {{- else -}}
            {{- if ne .Package "" -}} {{.Package}}. {{- end -}}
            {{.Definition}}(val)
        {{- end -}}
    }
{{- end -}}

// Code generated by github.com/switchupcb/copygen
// DO NOT EDIT.

{{ .Keep| bytesToString}}
{{range $fkey, $function := .Functions -}}
// {{$function.Name}} copies a {{template "JoinFields" $function.From}} to a {{template "JoinFields" $function.To}}.
func {{$function.Name}}( {{template "JoinParameters" $function.To}}, {{template "JoinParameters" $function.From}} ) {
	{{- range $tkey, $toType := $function.To -}}
	// {{$toType.Field.Name}} fields
		{{- range $fkey, $toField := $toType.Field.Fields }}
        	{{$toField.FullVariableName ""}} = {{""}}
				{{- if ne $toField.From.Options.Convert "" -}}
					{{$toField.From.Options.Convert}}({{$toField.From.FullVariableName ""}})
				{{- else -}}
                    {{- if ne $toField.Definition $toField.From.Definition -}}
                        {{- if $toField.IsSlice -}}
                            {{template "CopySlice" $toField}}
                        {{- else -}}
                            {{- if ne $toField.Package "" -}} {{$toField.Package}}. {{- end -}}
                                {{$toField.Definition}}({{$toField.From.FullVariableName ""}})
                        {{- end -}}
                    {{- else -}}
                        {{- if $toField.IsSlice -}}
                            {{template "CopySlice" $toField}}
                        {{- else -}}
                            {{$toField.From.FullVariableName ""}}
                        {{- end -}}
                    {{- end -}}
				{{- end}}
		{{- end -}}
	{{- end -}}
}
{{end}}